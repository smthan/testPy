# 文件夹二进制压缩工具

一个支持加密的文件夹压缩工具，可以将文件夹压缩为 `.fz` 格式的加密文件。

## 功能特性

- ? 遍历指定文件夹和子文件夹中的所有文件
- ? 以二进制方式读取文件
- ? 对数据进行加密并压缩为 fz 文件
- ? 支持反向解压和解密
- ? 支持自定义密码（强密码验证）
- ? 图形化界面（GUI）
- ? 保留文件夹结构（包括空文件夹）

## 安装依赖

```bash
pip install -r requirements.txt
```

依赖项：
- `cryptography>=41.0.0` - 用于加密解密功能

## 使用方法

### GUI 界面（推荐）

运行图形化界面：

```bash
python folder_zip_gui.py
```

界面功能：
- **压缩加密模式**：选择文件夹，指定输出 `.fz` 文件路径，设置密码
- **解密解压模式**：选择 `.fz` 文件，指定输出目录（会自动创建新文件夹），输入密码
- **密码强度验证**：压缩模式下，密码必须满足以下要求：
  - 长度大于 12 个字符
  - 包含大写字母
  - 包含小写字母
  - 包含数字
  - 包含特殊字符

## 文件格式说明

`.fz` 文件格式：

```
[salt长度(4字节大端序)][salt(16字节)][加密的gzip压缩数据]
```

压缩数据内部格式：

```
[JSON长度(4字节大端序)][JSON数据(UTF-8)][文件1长度(4字节)][文件1内容][文件2长度(4字节)][文件2内容]...
```

JSON 结构包含：
- `files`: 文件信息列表（路径、大小）
- `file_count`: 文件数量
- `folders`: 文件夹路径列表（包括空文件夹）
- `folder_count`: 文件夹数量

## 技术细节

- **加密算法**: Fernet (基于 AES-128-CBC)
- **密钥派生**: PBKDF2-HMAC-SHA256 (100,000 次迭代)
- **压缩算法**: gzip (压缩级别 9)
- **文件编码**: UTF-8
- **数据格式**: 大端序（Big-Endian）

## 安全说明

- 使用 PBKDF2 密钥派生函数，增加暴力破解难度
- 每个文件使用唯一的 salt 值
- 密码强度验证确保使用强密码
- **重要**：请妥善保管密码，丢失密码将无法恢复文件

## 项目结构

```
FolderZip/
├── folder_zip_gui.py    # 主程序（包含所有功能）
├── requirements.txt     # 依赖列表
├── README.md           # 项目说明
└── .gitignore         # Git 忽略文件
```

所有功能都集成在 `folder_zip_gui.py` 中：
- 加密解密模块（`derive_key`, `encrypt_data`, `decrypt_data`）
- 压缩功能模块（`compress_folder`）
- 解压功能模块（`decompress_fz`）
- GUI 界面模块（`FolderZipGUI`）

## 使用示例

### 压缩文件夹

1. 运行程序：`python folder_zip_gui.py`
2. 选择"压缩加密"模式
3. 选择要压缩的文件夹
4. 指定输出文件路径（`.fz` 文件）
5. 输入强密码（满足密码要求）
6. 点击"开始执行"

### 解压文件

1. 运行程序：`python folder_zip_gui.py`
2. 选择"解密解压"模式
3. 选择 `.fz` 文件
4. 选择输出目录（程序会在该目录下自动创建新文件夹）
5. 输入密码
6. 点击"开始执行"

## 注意事项

- 请妥善保管密码，丢失密码将无法恢复文件
- 确保有足够的磁盘空间进行压缩/解压操作
- 大文件处理可能需要较长时间
- 解压时会自动在目标目录中创建新文件夹，避免覆盖现有文件
- 建议在使用前先用测试文件夹验证功能

## 许可证

本项目为开源项目，可自由使用和修改。
